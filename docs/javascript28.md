---
id: javascript28
title: Регулярные выражения
sidebar_label: Регулярные выражения
---

**Регулярные выражения** (англ. _regular expressions_) — формальный язык поиска и осуществления манипуляций с строками в тексте, основанный на использовании метасимволов. Регулярные выражения позволяют:
* **Искать** текст в строке;
* **Заменять** подстроки в строке;
* **Извлекать** информацию из строки.

JavaScript, наряду с Perl, это один из языков программирования в котором поддержка регулярных выражений встроена непосредственно в язык.

## Сложность использования

Недостаток регулярных выражений в том, что часто они выглядят странно и даже пугающе. Особенно это касается более сложных шаблонов. 

```jsx 
function escapeRegExp(string){
  return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
}
```

## Определение регулярных выражения

Определение регулярного выражения, это создание шаблона на основе которого будет происходить работа со строками. В JavaScript регулярные выражения это объект, который может быть определён двумя способами.

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs
  defaultValue="literal"
  values={[
      {label: 'Литерал', value: 'literal'},
      {label: 'Конструкция', value: 'construction'},
    ]
  }>
  <TabItem value="literal">

  Определение регулярных выражений с использованием литералов. Для регулярных выражений литералами выступают слэши `/ ... /`, они играют ту же роль, что и `' ... '` при создании строк.

  ```jsx
    let regExp = /шаблон/
  ```

  Если вы решили создавать регулярные выражения при помощи литералов, то стоит учитывать, что такой метод создания _не допускает динамическое изменение_ задаваемых значений. Происходит это из-за того, что литералы регулярных выражения вызывают _предварительную компиляцию_ при анализе скрипта. 

  </TabItem>
  <TabItem value="construction">

  Определение регулярных выражений с использованием конструктора.

  ```jsx
    let regExp = new RegExp('шаблон')
  ```
  Компиляция регулярного выражения созданного с использованием конструктора происходит в момент выполнения скрипта. Такой способ создания стоит использовать, если ваше регулярное выражение создаётся их динамически сгенирированной строки.

  </TabItem>
</Tabs>

## Использование

Использование регулярных выражений расмотрим на примере:
```jsx
  let regExp = /banana/
```

Этим кодом мы создали просто регулярное выражение, которое ищет строку `banana`. Для тестирования регулярного выражения можно использовать метод `.test(string)`, результатом работы метода является `boolean` значение.

```jsx live
function learnJavaScript() {
  let regExp = /banana/,
  str = 'fanana ranana banana'

  if ( regExp.test(str) ) {
    return 'Нашёл'
  } else {
    return 'Нету'
  }
}
```

В примере регулярное выражение ищет подстроку `banana` в строке `str`.

## Флаги

Флаги используются для расширения осуществяылемого регулярными выражениями поиска. 

- `g` - при поиске ищет все совпадения;
- `i` - поиск не зависит от регистра `[Z-z]`;
- `m` - многострочный режим;
- `s` - включает режим **dotall**, при котором точка `.` может соответствовать символу перевода строки;
- `y` - выполняет поиск начиная с символа, который находится на позиции свойства **lastindex** текущего регулярного выражения;
- `u` - включает поддержку **Unicode**.

Использование флагов при разных способах создания шаблона регулярного выражения
<Tabs
  defaultValue="literal"
  values={[
      {label: 'Литерал', value: 'literal'},
      {label: 'Конструкция', value: 'construction'},
    ]
  }>
  <TabItem value="literal">

  ```jsx
    let regExp = /шаблон/флаг
  ```
  Обратите внимание, что флаги являются **неотъемлемой частью** регулярного выражения. Флаги не могут быть добавлены или удалены позднее. Так же флаги можно компбинировать.

  ```jsx live
    function learnJavaScript() {
      let regExp = /banana/i,
      str = 'faNana RanaNA BaNanA'

      if ( regExp.test(str) ) {
        return 'Нашёл'
      } else {
        return 'Нету'
      }
    }
  ```

  Попробуйте убрать флаг `i` из примера.
  </TabItem>
  <TabItem value="construction">

   ```jsx
    let regExp = new RegExp('шаблон', 'флаг')
   ``` 

   Обратите внимание, что флаги являются **неотъемлемой частью** регулярного выражения. Флаги не могут быть добавлены или удалены позднее. Так же флаги можно компбинировать.

  ```jsx live
    function learnJavaScript() {
      let regExp = new RegExp('banana', 'i'),
      str = 'faNana RanaNA BaNanA'

      if ( regExp.test(str) ) {
        return 'Нашёл'
      } else {
        return 'Нету'
      }
    }
  ```

  Попробуйте убрать флаг `i` из примера.
  </TabItem>
</Tabs>

## Символьные классы

**Символьный класс** - это специальное обозначение, которое соотвествует любому символу из определённого набора. Символьный класс обозначается обратным слэшом `\`, символ последующий после слэша будет считаться специальным символом. Специальные символы используются для создания более сложных шаблонов.

Наиболее часто используемые специальные символы регулярных выражений в JavaScript:
#### `.` - соответствует любому символу
```jsx
let regExp = /шабло./
// На месте точки может находиться любой символ
```

#### `\d` - соответствует цифре от 0 до 9
```jsx
let regExp = /\d/
// `3` в `ban3ana`
// `4` в `in 412`
```

#### `\w` - соответствует букве латинского алфавита, цифре и подчёркиванию `_`
```jsx
let regExp = /\w/
// `1` в `№1`
// `b` в `banana*`
```

#### `\s` - соответствует одиночному символу пустого пространства (пробел, табуляция, перевод строки)
```jsx
let regExp = /\s/
// ' ' в `lime orange` 
```
#### `\0` - соответствует `null`

#### `\n` - соответствует символу перевода строки

#### `\t` - соответствует символу горизонтальной табуляции

#### `\v` - соответствует символу вертикальной табуляции

#### `\r` - соответствует символу возврата каретки

#### `\xhh` - соответствует символам кода hh (две шестнадцатиричные цифры)

#### `\uhhhh`	- cоответствует символам кода hhhh (четыре шестнадцатиричные цифры)

### Обратные символьные классы

Для некоторых символьных классов существует `обратный класс`, который обозначается такой же буквой, но в верхнем регистре. Этот класс выдаёт `противоположное значение` исходному, символьному классу.

#### `\D` - всё, что не соответствует `\d`
```jsx
let regExp = /\D/
// `b` в `ban3ana`
// `i` в `in 412`
```

#### `\W` - всё, что не соответствует `\w`
```jsx
let regExp = /\W/
// `№` в `№1`
// `*` в `banana*`
```

#### `\S` - всё, что не соответствует `\s`
```jsx
let regExp = /\s/
// `l` в `lime orange`
```

## Якоря

Якоря привязывают шаблон к началу или концу строки. Для привязки к началу строки используется - `^`, а к концу - `$`.

```jsx live
  function learnJavaScript() {
    let regExp = /^banana/,
    str = 'lime banana orange'

    if (regExp.test(str)) {
      return 'Нашёл'
    } else {
      return 'Нету'
    }
  }
```

Используя такой шаблон `/banana/` вы будете искать `banana` во всей строке. Если нужно проверить на полное совпадение строки с шаблоном нужно использовать якоря `/^banana$/`. Метод `.test()` вернёт `true` только в том случае, если вся строка это `banana`.

## Экранирование

Если вам нужно в шаблоне использовать символ, который является специальным, то его нужно **экранировать**. Для экранирования используют обратный слэш `\`.

```jsx live
  function learnJavaScript() {
    let regExp = /banana\./,
    str = 'lime orange banana.'

    if (regExp.test(str)) {
      return 'Нашёл'
    } else {
      return 'Нету'
    }
  }
```

## Диапазоны и наборы

Для поиска определенных символов из диапазона или набора их нужно указать в квадратных скобках `[...]`. К примеру нужно найти в строке цифру 1, 5 или 8. Такому набору будет соответствовать такой шаблон: `[158]`. Результатом будет один символ из набора. Если же нужно найти любую цифру от 0 до 9, то легче использовать диапазон `[0-9]`, можно заметить, что такой диапзаон соответствует специальому символу `\d`. 

```jsx live
  function learnJavaScript() {
    let regExp = /[ban]/,
    str = '$bcd'

    if (regExp.test(str)) {
      return 'Нашёл'
    } else {
      return 'Нету'
    }
  }
```

## Квантификаторы

Квантификаторы используются для указания количества повторений определенных символов или целых наборов символов.

Квантификаторы в JavaScript:
- `{n}` - указывает **n** количество повторений шаблона или его части.
```jsx live
  function learnJavaScript() {
    let regExp = /[0-9]{5}/, // аналог regExp = /\d{5}/
    str = '#$g99823'

    if (regExp.test(str)) {
      return 'Нашёл'
    } else {
      return 'Нету'
    } 
  }
```
